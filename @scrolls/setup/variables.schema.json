{
  "$id": "https://develfish.studio/example-store/layout.schema.json",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "additionalProperties": false,
  "type": "object",
  "title": "Bootstrap from an Existing Database",
  "description": "Use this project generation preset to create an application by importing table definitions from an existing database.",
  "properties": {
    "project": {
      "type": "object",
      "title": "General Info",
      "description": "This information is used to name files and directories in the target directory.",
      "properties": {
        "name": {
          "title": "Project Name",
          "default": "",
          "type": "string",
          "minLength": 4
        }
      },
      "required": ["name"]
    },
    "database": {
      "type": "object",
      "title": "Source Database",
      "description": "Specify the connection settings for your database to import table definitions.",
      "properties": {
        "type": {
          "title": "Database Type",
          "default": "",
          "type": "string",
          "enum": ["postgres", "mysql"]
        },
        "connection-string": {
          "title": "Connection String",
          "description": "This is the USQL connection string. You can enter a full connection string here or use an alias configured in the usql-config.yaml file located in the root of your project.",
          "default": "",
          "type": "string"
        },
        "catalog-whitelist": {
          "type": "array",
          "title": "Catalogs Whitelist",
          "description": "This is a list of Lua patterns used to whitelist database catalogs. To whitelist all catalogs, simply omit the patterns.",
          "items": {
            "type": "string",
            "minLength": 1,
            "default": ["[%w_]+"],
            "examples": [
              "[%w_]+",
              "my_db"
            ]
          },
          "minItems": 1,
          "uniqueItems": true,
          "default": [".*"]
        },
        "catalog-blacklist": {
          "type": "array",
          "title": "Catalogs Blacklist",
          "description": "This is a list of Lua patterns used to blacklist database catalogs.",
          "items": {
            "type": "string",
            "minLength": 1,
            "default": "my_db",
            "examples": [
              "[%w_]+",
              "my_db"
            ]
          },
          "minItems": 1,
          "uniqueItems": true,
          "default": ["my_db"]
        },
        "schema-whitelist": {
          "type": "array",
          "title": "Schemas Whitelist",
          "description": "This is a list of Lua patterns used to whitelist database schemas by their full names. The full name of a schema is composed of the catalog and schema name, separated by dot (e.g., catalog.schema). To whitelist all schemas, simply omit the patterns.",
          "items": {
            "type": "string",
            "minLength": 1,
            "default": ["[%w_]+%.[%w_]+"],
            "examples": [
              "[%w_]+%.[%w_]+",
              "my_db%.my_schema"
            ]
          },
          "minItems": 1,
          "uniqueItems": true,
          "default": [".*"]
        },
        "schema-blacklist": {
          "type": "array",
          "title": "Schemas Blacklist",
          "description": "This is a list of Lua patterns used to blacklist database schemas by their full names. The full name of a schema is composed of the catalog and schema name, separated by dot (e.g., catalog.schema).",
          "items": {
            "type": "string",
            "minLength": 1,
            "default": "my_db%.my_schema",
            "examples": [
              "[%w_]+%.[%w_]+",
              "my_db%.my_schema"
            ]
          },
          "minItems": 1,
          "uniqueItems": true,
          "default": ["[w%_]+%.information_schema"]
        },
        "table-whitelist": {
          "type": "array",
          "title": "Tables Whitelist",
          "description": "This is a list of Lua patterns used to whitelist database tables by their full names. The full name of a table is composed of the catalog, schema, and table name, separated by dots (e.g., catalog.schema.table). To whitelist all tables, simply omit the patterns.",
          "items": {
            "type": "string",
            "minLength": 1,
            "default": ["[%w_]+%.[%w_]+%.[%w_]+"],
            "examples": [
              "[%w_]+%.[%w_]+%.[%w_]+",
              "my_db%.my_schema%.[%w_]+"
            ]
          },
          "minItems": 1,
          "uniqueItems": true,
          "default": [".*"]
        },
        "table-blacklist": {
          "type": "array",
          "title": "Tables Blacklist",
          "description": "This is a list of Lua patterns used to blacklist database tables by their full names. The full name of a table is composed of the catalog, schema, and table name, separated by dots (e.g., catalog.schema.table).",
          "items": {
            "type": "string",
            "minLength": 1,
            "default": "my_db%.my_schema%.my_table",
            "examples": [
              "[%w_]+%.[%w_]+%.[%w_]+",
              "my_db%.my_schema%.[%w_]+"
            ]
          },
          "minItems": 1,
          "uniqueItems": true,
          "default": ["my_db%.my_schema%.my_table"]
        }
      },
      "required": ["type", "connection-string"]
    },
    "backend": {
      "title": "Backend",
      "description": "Generate Backend Application",
      "default": {
        "name": "backend",
        "type": "sbt-maven",
        "package": "com.example.app",
        "version": "1.0.0-SNAPSHOT",
        "features": {
          "kafka-messaging": false
        }
      },
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "title": "Name",
          "default": "backend",
          "minLength": 3
        },
        "type": {
          "type": "string",
          "enum": ["sbt-maven"],
          "default": "sbt-maven"
        },
        "namespace": {
          "type": "string",
          "title": "Namespace",
          "default": "com.example.app",
          "description": "Base Package or Namespace Name",
          "pattern": "(\\w+)(\\.\\w+)*"
        },
        "version": {
          "type": "string",
          "title": "Version",
          "default": "1.0.0-SNAPHOT",
          "minLength": 3,
          "pattern": "(\\d+)\\.(\\d+)\\.(\\d+)(-(\\w+))?"
        },
        "features": {
          "type": "object",
          "title": "Options",
          "description": "Select the features you need for your application.",
          "properties": {
            "kafka-messaging": {
              "type": "boolean",
              "title": "Enable Kafka messaging",
              "default": false
            },
            "websocket-messaging": {
              "type": "boolean",
              "title": "Enable WebSocket messaging",
              "default": false
            },
            "minio-integration": {
              "type": "boolean",
              "title": "Enable S3 (Minio) integration",
              "default": false
            },
            "keycloak-integration": {
              "type": "boolean",
              "title": "Enable OpenID (Keycloak) integration",
              "default": false
            }
          }
        }
      },
      "required": ["name", "type", "features"]
    },
    "admin-ui": {
      "title": "Admin UI",
      "description": "Generate Admin UI",
      "default": {
        "name": "admin_ui",
        "type": "vite-vue",
        "version": "1.0.0-SNAPSHOT",
        "features": {
          "kafka-messaging": false
        }
      },
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "title": "Name",
          "default": "backend",
          "minLength": 3
        },
        "type": {
          "type": "string",
          "enum": ["vite-vue"],
          "default": "vite-vue"
        },
        "namespace": {
          "type": "string",
          "title": "Namespace",
          "default": "com.example.app",
          "description": "Base Package or Namespace Name",
          "pattern": "(\\w+)(\\.\\w+)*"
        },
        "version": {
          "type": "string",
          "title": "Version",
          "default": "1.0.0-SNAPHOT",
          "minLength": 3,
          "pattern": "(\\d+)\\.(\\d+)\\.(\\d+)(-(\\w+))?"
        },
        "features": {
          "type": "object",
          "title": "Options",
          "description": "Select the features you need for your application.",
          "properties": {
            "websocket-messaging": {
              "type": "boolean",
              "title": "Enable WebSocket messaging",
              "default": false
            }
          }
        }
      },
      "required": ["name", "type", "features"]
    },
    "migrate": {
      "title": "Database Migrations",
      "description": "Generate Database Migration Scripts",
      "default": {
        "name": "migrate",
        "type": "liquibase"
      },
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "title": "Name",
          "default": "migrate",
          "minLength": 3
        },
        "type": {
          "type": "string",
          "enum": ["liquibase"],
          "default": "liquibase"
        }
      },
      "required": ["name", "type"]
    },
    "compose": {
      "title": "Docker Compose",
      "description": "Bootstrap Docker Compose Environment",
      "default": {
        "name": "compose",
        "features": {
          "kafka": false,
          "kafka-ui": false,
          "keycloak": false,
          "keycloak-cli": false,
          "minio": false,
          "minio-cli": false,
          "postgres": false,
          "pgadmin": false,
          "mysql": false,
          "phpmyadmin": false,
          "swagger-ui": false,
          "haproxy": false
        }
      },
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "title": "Name",
          "default": "compose",
          "minLength": 3
        },
        "features": {
          "type": "object",
          "title": "Options",
          "description": "Select the features you need for your application.",
          "properties": {
            "kafka": {
              "type": "boolean",
              "title": "Kafka Container",
              "default": false
            },
            "kafka-ui": {
              "type": "boolean",
              "title": "Kafka UI Container",
              "default": false
            },
            "keycloak": {
              "type": "boolean",
              "title": "Keycloak Container",
              "default": false
            },
            "keycloak-cli": {
              "type": "boolean",
              "title": "Keycloak CLI",
              "default": false
            },
            "minio": {
              "type": "boolean",
              "title": "Minio Container",
              "default": false
            },
            "minio-cli": {
              "type": "boolean",
              "title": "Minio CLI",
              "default": false
            },
            "postgres": {
              "type": "boolean",
              "title": "Postgres Container",
              "default": false
            },
            "pgadmin": {
              "type": "boolean",
              "title": "PgAdmin Container",
              "default": false
            },
            "mysql": {
              "type": "boolean",
              "title": "MySQL Container",
              "default": false
            },
            "phpmyadmin": {
              "type": "boolean",
              "title": "PhpMyAdmin Container",
              "default": false
            },
            "swagger-ui": {
              "type": "boolean",
              "title": "Swagger UI Container",
              "default": false
            },
            "haproxy": {
              "type": "boolean",
              "title": "HaProxy Container",
              "default": false
            }
          }
        }
      },
      "required": ["name", "features"]
    }
  },
  "required": ["project", "database"]
}